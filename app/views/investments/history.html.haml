.page-header
  %h1 Investment History

%table.table.table-striped.table-bordered.table-hover.table-stacked#investments-table
  %thead
    %tr
      %th Date
      %th Cumulative Contributions
      %th Cumulative Value
      %th Total Gain/Loss
      %th Total Return

  %body
    - @snapshots.each do |snapshot|
      - cumulative_contributions = @cumulative_contributions[snapshot.date]
      - cumulative_value = snapshot.total
      - total_gain = cumulative_value - cumulative_contributions
      - total_return = total_gain / cumulative_contributions.to_f * 100

      %tr
        %td
          = snapshot.formatted_date

        %td
          = currency cumulative_contributions

        %td
          = currency cumulative_value

        %td{class: total_gain >= 0 ? 'text-success' : 'text-danger'}
          = currency total_gain

        %td{class: total_return >= 0 ? 'text-success' : 'text-danger'}
          = sprintf '%.2f%', total_return
